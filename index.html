<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>SNAKE by Abbo - BETA</title>
    <link rel="icon" type="image/x-icon" href="resources/snake.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" /> 
    <script src="game.js" defer type="module"></script> 
    <script>  
    // AJAX inizio
      var migliorPunteggio = localStorage.getItem('miglior_punteggio');
      var pseudonimo = localStorage.getItem('nickname');
      // Creare l'oggetto XMLHttpRequest
      var xhr = new XMLHttpRequest();

      // Definire la funzione di gestione della risposta
      xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
            // La richiesta è stata completata con successo
            console.log("Dati inviati con successo!");
          } else {
            // Si è verificato un errore nella richiesta
            console.error(
              "Si è verificato un errore durante l'invio dei dati."
            );
          }
        }
      };

      // Preparare i dati da inviare
      var data = new FormData();
      data.append("migliorPunteggio", migliorPunteggio);
      data.append("pseudonimo", pseudonimo);

      // Aprire la richiesta verso stats.php
      xhr.open("POST", "https://snakeabbo.000webhostapp.com/stats.php", true);

      // Invia la richiesta https://snakeabbo.000webhostapp.com/
      xhr.send(data);
      //AJAX fine
</script>
  </head>
  <body>
    <div id="game-board"></div>
   
    <div class="score">
      <div>
        <h1>SCORE:</h1>
        <h1 id="punteggio"></h1>
      </div>
    <br> 
      <div>
        <h1><a href="https://snakeabbo.000webhostapp.com/classifica.html" target="_blank" style="text-decoration: none; color: inherit;">BEST SCORE:</a></h1>
        <h1 id="migliorPunteggio" ></h1>
      </div>
      <div>
        <h1>NICKNAME:</h1>
        <h1 id="nickname" ></h1>
      </div>
    </div>
    <img
      src="resources/haiperso.png"
      class="schermatafinale"
      id="schermatafinale"
    />
  </body>
</html>
